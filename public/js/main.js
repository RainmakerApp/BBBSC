/*! bbbsc 2015-05-08 */
(function(){window.fbAsyncInit=function(){FB.init({appId:"929983597012726",channelUrl:window.facebookChannelFile,status:!0,cookie:!0,xfbml:!0,oauth:!0}),$(document).trigger("facebook:ready")},function(a,b,c){var d,e;e=void 0,d=a.getElementsByTagName(b)[0],a.getElementById(c)||(e=a.createElement(b),e.id=c,e.src="//connect.facebook.net/en_US/all.js",d.parentNode.insertBefore(e,d))}(document,"script","facebook-jssdk"),$(function(){var a;return a=function(){return FB.login(function(a){a.authResponse?$.ajax({url:"/act/session/connectfacebook",type:"POST",data:{"access-token":a.authResponse.accessToken,"user-id":a.authResponse.userId,"--delay-facebook-friend-import":!0,"--json":!0,"--login":!0},success:function(a){1===a.success?$(document).trigger("momentum:facebook-login-success",[a]):$(document).trigger("momentum:facebook-login-error",[a])}}):$(document).trigger("momentum:facebook-login-cancel")},{scope:null==window.facebookLoginScope?"email,user_likes":window.facebookLoginScope}),!1},$(document).on("click","a[rel=facebook-login]",a),$(document).on("momentum:facebook-login",a),$(document).on("momentum:facebook-login-success",function(){console.log("Index: "+window.location.pathname.indexOf("my-storks")),window.location="/#/fundraiser/create/1"}),$(document).on("momentum:facebook-login-cancel",function(){}),$(document).on("momentum:facebook-login-error",function(a,b){alert("Could not create your account with the system. Please try again later. "+b.message)})})}).call(this),function(){var a,b,c,d,e,f,g;d=function(a){return!isNaN(a)&&function(a){return(0|a)===a}(parseFloat(a))},$("a#fundraiserMenu").on("click",function(){$(this).find("i").toggleClass("active"),$(".laptop-menu").toggleClass("show")}),$("i#md-navigation").on("click",function(){$(this).toggleClass("active"),$(".laptop-menu").toggleClass("show")}),$("i#sm-navigation").on("click",function(){$(this).toggleClass("active"),$("body").toggleClass("show-mobile")}),$("span.lgbt").on("click",function(){console.log("Testing..."),$("body").addClass("modal-open")}),$(".overlay").on("click",function(a){return a.target===$(".overlay")[0]?$("body").removeClass("modal-open"):void 0}),$(".tab").on("click",function(){var a;$(this).addClass("active").siblings().removeClass("active"),$(this).data("target")&&$(this).data("target").length>=1&&(a=$(this).data("target"),$(".pane#"+a).fadeIn("150").addClass("active").siblings(".pane").removeClass("active").hide(),history.pushState(null,null,"#"+a))}),$(".faq li").on("click",function(){$(this).addClass("active").siblings().removeClass("active")}),$(".ticket select").on("change",function(){var a,b;a=$("select[name=ticket-amount]").val(),b=$("select[name=ticket-type]").val(),$(".ticket .total > p").text("$"+a*b)}),$(".input-group:not(.split)").each(function(){return $("input, textarea").on("focus",function(){var a;return a=$(this).parent(".input-group"),$(a).addClass("focus")}),$("input, textarea").on("blur",function(){var a;return a=$(this).parent(".input-group"),$(a).removeClass("focus")})}),$(".input-group.split").each(function(){return $("input, textarea").on("focus",function(){var a;return a=$(this).closest(".input-group"),$(a).addClass("focus")}),$("input, textarea").on("blur",function(){var a;return a=$(this).closest(".input-group"),$(a).removeClass("focus")})}),f=1,$("#toggle-type").on("click",function(){return 1===f?($(this).html("<a href='#'>Sign Up as an Individual</a>"),$("#group").slideToggle(),f=2):($(this).html("<a href='#'>Sign Up as a Group</a>"),$("#group").slideToggle(),f=1),!1}),$(".sample").on("click",function(a){var b;return b=$(this).data("message"),$(this).parents(":eq(2)").find("textarea").val(b),a.preventDefault()}),$(window).load(function(){var a,c,e,f;if(e=window.location.hash.substr(1),a=e.split("/"),f=a[a.length-1],e.indexOf("/fundraiser/create")>-1){if(b(),!d(f))return $(".step[data-step=0]").show().siblings(".step").hide();if($('.step[data-step="'+f+'"]').show().siblings(".step").hide(),1===f)return $(".wrapper__forms-nav").slideDown("150"),$(".wrapper__title").slideUp("150")}else if(e)return c=document.getElementById(e),$('[data-target="'+e+'"]').addClass("active").siblings(".tab").removeClass("active"),$(c).fadeIn("150").siblings(".pane").hide()}),$(window).on("hashchange",function(){var a,b,c;b=window.location.hash.substr(1),a=b.split("/"),c=a[a.length-1],c>=1&&($(".wrapper__forms-nav").slideDown("150"),$("wrapper__title").slideUp("150"))}),$(window).on("resize",function(){var a,b,c,d;return a=document.getElementById("canvas"),c=document.getElementsByClassName("create-fundraiser__wrapper"),d=document.getElementsByClassName("wrapper_sizing"),b=$(window).height(),$("body").hasClass("create-fundraiser")?$(a).css({"max-height":b+"px",overflow:"hidden"}):void 0}),e=function(a){$("div[data-step="+a+"]").fadeOut("150",function(){return $("div[data-step="+(a+1)+"]").fadeIn("150",function(){return window.location.hash="/fundraiser/create/"+(a+1),$(".wrapper__forms-nav").fadeIn("150"),$('ul.complete > li[data-related="'+a+'"]').addClass("complete").html('<span class="num"><i class="fa fa-check"></i></span>'),$('ul.complete > li[data-related="'+(a+1)+'"]').css({display:"inline-block"}),$('ul.pending > li[data-related="'+(a+1)+'"]').css({display:"none"})})})},window.isGroup={},$("form.ajax:not(#create-fundraiser)").on("submit",function(a){var b,c;b=$(this).parent(".step"),c=$(b).data("step"),g(c),a.preventDefault()}),$(".select__wrapper-gallery .thumb").on("click",function(){var a,b,c,d,f;d=$(this).css("background-image"),d=d.replace("url(","").replace(")",""),$('input[name="fileUrl"]').val(d),f=$(this).parents(":eq(2)"),e=document.getElementsByClassName("upload__wrapper"),a=$(e).find("form").attr("action"),b=a.split("/"),c=b[4],$(f).fadeOut("150",function(){return $(".featured__image-container").css({"background-image":"url("+d+")"}),$(e).fadeIn(150)}),$.ajax({url:"/api/3.0/groups/"+c+"/attachments",type:"POST",data:{fileUrl:d},dataType:"JSON",success:function(a){console.log(a)},error:function(a){var b;return b=a.responseJSON,console.log(b.status.message)}})}),$("form#create-contact").on("submit",function(){var a;return $("input#group-input").val()?(a=$("input#group-input").val(),console.log(a),$("form#create-fundraiser").find("#name").val(a).parents("form").find("#type").val("team")):void 0}),$("form#create-fundraiser").on("submit",function(){var a,b;return a=$(this).parent(".step"),b=$(a).data("step"),g(b),!1}),g=function(a,b){var d,f,g,h,i;f=$("div[data-step="+a+"] > form"),h=$(f).attr("action"),d=$(f).serializeArray(),g=$("input#group-input").val(),i=g?"teams":"fundraising",console.log(g),$.ajax({url:h,type:"POST",data:d,dataType:"json",success:function(d){"function"==typeof b?(b.call(null,d),e(a)):(e(a),1===a&&(console.log(i),c(d,i)))},error:function(a){var b;b=a.responseJSON,$(f).find(".error").html(b.status.message).fadeIn("150")}})},c=function(a,b){var c;return a=a.data,c="/api/3.0/groups/"+a.id,$("form.ajax").each(function(){return $(this).attr("action",c)}),$("form[name=customPhoto], form[name=fileUrlForm]").attr("action","/api/3.0/groups/"+a.id+"/attachments").find("input[name=--success]").val("/fundraising/"+a.id).parent(".col").find("input[name=--failure]").val("/fundraising/"+a.id+"?error"),$("form[name=customPhoto]").find("a.button").attr("href","/"+b+"/"+a.id),$("#upload").attr("data-id",a.id)},b=function(a){var b,c,d,e;b=document.getElementById("canvas"),d=document.getElementsByClassName("create-fundraiser__wrapper"),e=document.getElementsByClassName("wrapper_sizing"),c=$(window).height(),Modernizr.cssfilters?($("body").addClass("create-fundraiser"),$(b).css({"max-height":c+"px",overflow:"hidden"}),$(".close-modal").on("click",function(){return $("body").removeClass("create-fundraiser"),$(b).css({"max-height":"none",overflow:"visible"}),window.location.hash=""}),$("select[name=type]").val(a===!0?"team":"fundraiser")):$(b).addClass("overlay")},$("#create__fundraiser").on("click",function(){return window.location.hash="/fundraiser/create",b(),!1}),$(".create__fundraiser").on("click",function(){var a;return window.location.hash="/fundraiser/create",a=$(this).data("team"),a===!0?b(a):b(),!1}),$("#upload").on("click",function(){var a;return a=$(this).data("id"),$(this).ajaxfileupload({action:"/api/3.0/groups/"+a+"/attachments",onComplete:function(a){$(".featured__image-container").css({"background-image":"url("+a.data.raw+")"}),$(".upload-button").find("span").html("<small>"+a.data.name+"</small>")},onStart:function(){$(".upload-button").find("span").html('Uploading <i class="fa fa-spin fa-spinner fa-pulse"></i>')}})}),$("#customPhoto").on("click",function(){var a;return a=$(this).data("id"),$(this).ajaxfileupload({action:"/api/3.0/contacts/me/attachments",onComplete:function(a){$(".banner-area_featured").css({"background-image":"url("+a.data.raw+")"}).addClass("change"),$(".upload-button").text(a.data.name),setTimeout($(".modal").removeClass("active",3e3)),$.ajax({type:"POST",url:"/api/3.0/contacts/me/",async:!1,data:{prop:{"prefer-facebook":0}},success:function(){console.log("You now prefer to use your uploaded photo.")}})},onStart:function(){$(".upload-button").html('Uploading <i class="fa fa-spin fa-spinner fa-pulse"></i>')}})}),a=function(){var a,b;b=function(a){"connected"===a.status&&($.post("/api/3.0/session/from-facebook",a.authResponse),window.location.href=window.location.href)},a=function(){FB.getLoginStatus(function(a){b(a)})},window.fbAsyncInit=function(){FB.init({appId:facebookAppId,cookie:!0,xfbml:!0,version:"v2.1"})},FB.getLoginStatus(function(a){b(a)}),function(a,b,c){var d,e;e=void 0,d=a.getElementsByTagName(b)[0],a.getElementById(c)||(e=a.createElement(b),e.id=c,e.src="//connect.facebook.net/en_US/sdk.js",d.parentNode.insertBefore(e,d))}(document,"script","facebook-jssdk")},$("#facebook__login").on("click",function(){return a(),$.ajax({type:"POST",url:"/api/3.0/contacts/me/",async:!1,data:{prop:{"prefer-facebook":1}},success:function(){console.log("You now prefer to use your facebook photo.")}}),!1}),$(".upload").on("click",function(){return $(".modal").addClass("active")}),$("#background").on("click",function(a){return"background"===a.target.id?$(".modal").removeClass("active"):void 0}),$(".subscribe").on("submit",function(){var a,b;return a=$(this),b=$(this).serialize(),console.log(b),$.ajax({url:"/api/3.0/contacts",type:"POST",data:b,dataType:"JSON",success:function(){a.fadeOut(150,function(){return a.html("<h2>Thanks for subscribing!</h2>").fadeIn(150)})},error:function(b){var c;return c=b.responseJSON,a.find("h1").fadeOut(150,function(){return a.find(".error").html(c.status.message).fadeIn(150)})}}),!1}),$("#select__wrapper").on("click",function(){var a;return a=$(this).parents(":eq(3)"),e=document.getElementsByClassName("select__wrapper"),$(a).fadeOut("150",function(){return $(e).fadeIn(150)}),!1}),$("#upload__wrapper").on("click",function(){var a;return a=$(this).parents(":eq(3)"),e=document.getElementsByClassName("upload__wrapper"),$(a).fadeOut("150",function(){return $(e).fadeIn(150)}),!1}),$('select[name="type"]').on("change",function(){var a,b;b=$(this).val(),b.indexOf("event")>-1?(a=$('select[name="prop.eventName"] option:selected').data("end"),$(".event-list").slideDown(),$(".date").slideUp(),$('input[name="date_until"]').val(a)):($(".event-list").slideUp(),$(".date").slideDown(),$('input[name="date_until"]').val(""))}),$('select[name="prop.eventName"]').on("change",function(){var a;return a=$("option:selected",this).data("end"),$(".date").slideUp(),$(".date").val(a)}),$("#m, #d, #y").on("blur keydown keyup",function(){var a,b,c,d,e;d=$("#m").val(),b=$("#d").val(),e=$("#y").val(),a=d+"/"+b+"/"+e,c=$('input[name="date_until"]'),$(c).val(a)}),$(".show__event").each(function(){return $(this).on("click",function(){var a;return a=$(this).data("target"),$("body").addClass("glass-event"),$("#"+a).addClass("in"),window.scrollTo(0,0)})}),$(".body__header li").on("click",function(){var a,b;return b=$(this).data("target"),a=$(this).attr("id"),$(this).addClass("active").siblings().removeClass("active"),$(".button-group").css("overview"!==b?{opacity:0,marginTop:0}:{opacity:1,marginTop:"25px"}),a&&$(".tab-"+a).addClass("in").siblings(".in").removeClass("in"),$(this).parents(".wrapper__body").find("."+b).addClass("in").siblings().removeClass("in"),console.log()}),$(window).load(function(){var a,b,c;return c=window.location.hash.substr(1),a=c.split("/"),b=a[a.length-1],console.log(c),c.indexOf("event")>-1?($("#"+b).addClass("in"),$("body").addClass("glass-event")):void 0}),$(".glass-event__wrapper").on("click",function(){return $(".glass-event__wrapper.in").removeClass("in"),$("body").removeClass("glass-event")}),$(".wrapper__body span.shut").on("click",function(){var a;return a=$(this).data("target"),$(".glass-event__wrapper.in").removeClass("in"),$("body").removeClass("glass-event")}),$(".wrapper__body").on("click",function(a){return a.stopPropagation()}),$(".nav a").on("click",function(){var a,b;return a=this.className.split(" ")[0],console.log(a),"back"===a?(b=parseInt($(".body__header").find(".active").attr("id"))-1,console.log(b),$("#"+b).click()):"next"===a&&(b=parseInt($(".body__header").find(".active").attr("id"))+1,console.log(b),$("#"+b).click(),5===b&&(console.log("Should work!"),$(".nav a.next").text("Submit")),6===b)?($(".nav a.prev").hide(),$(".nav a.next").hide()):void 0})}.call(this);